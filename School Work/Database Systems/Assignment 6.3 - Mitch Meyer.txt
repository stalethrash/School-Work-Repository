// Mitch Meyer
// CIS305-309H Database Management
// Assignment 6.3 - SQL 
// Group Project Database creation


// Create data tables for Custom Auto Body database

CREATE TABLE INSURANCE_t
 (Policy_Num INT,
  Insurance_Name VARCHAR,
  Insurance_Phone NUMBER(10),
  CONSTRAINT INSURANCE_PK PRIMARY KEY (Policy_Num));
  
  
CREATE TABLE CAR_t
 (Car_ID INT NOT NULL,
  Vin_Num VCHAR NOT NULL,
  Year INT NOT NULL,
  Make VCHAR NOT NULL,
  Model VCHAR NOT NULL,
  Color VCHAR NOT NULL,
  CONSTRAINT CAR_PK PRIMARY KEY (Car_ID));
  
  
CREATE TABLE MECHANIC_t
 (Mech_ID INT NOT NULL,
  Mech_lName VCHAR NOT NULL,
  Mech_fName VCHAR NOT NULL,
  CONSTRAINT MECHANIC_PK PRIMARY KEY (Mech_ID));
  

CREATE TABLE PARTS_t
 (Part_ID INT NOT NULL,
  Part_Number INT NOT NULL,
  Part_Desc VCHAR NOT NULL,
  Part_Qty INT NOT NULL,
  Part_Retail NUMBER(4,2) NOT NULL,
  Part_Cost NUMBER(4,2) NOT NULL,
  CONSTRAINT PARTS_PK PRIMARY KEY (Part_ID));


CREATE TABLE CUST_t
 (Cust_ID INT NOT NULL,
  Cust_lName VARCHAR NOT NULL,
  Cust_fName VARCHAR NOT NULL,
  Cust_Phone NUMBER(10) NOT NULL,
  Street_Address VARCHAR NOT NULL,
  City VARCHAR NOT NULL,
  State CHAR(2) NOT NULL,
  Zip INT NOT NULL,
  Policy_Num INT,
  CONSTRAINT CUST_PK PRIMARY KEY (Cust_ID),
  CONSTRAINT CUST_FK FOREIGN KEY (Policy_Num) REFERENCES INSURANCE_t(Policy_Num));


CREATE TABLE SERVICE_t
 (Service_ID INT NOT NULL,
  Service_Name VCHAR NOT NULL,
  Service_Rate NUMBER(4,2) NOT NULL,
  Service_Price NUMBER(4,2) NOT NULL,
  Part_ID INT NOT NULL,
  CONSTRAINT SERVICE_PK PRIMARY KEY (Service_ID),
  CONSTRAINT SERVICE_FK FOREIGN KEY (Part_ID) REFERENCES PARTS_t(Part_ID));


CREATE TABLE SERVICE_TICKET_t
 (Serv_Tkt_ID INT NOT NULL,
  Car_ID INT NOT NULL,
  Cust_ID INT NOT NULL,
  Mech_ID INT NOT NULL,
  Service_ID INT NOT NULL,
  Serv_dateStart DATE NOT NULL,
  Serv_dateFinish DATE NOT NULL,
  Serv_Comments VCHART,
  CONSTRAINT SERVICE_TICKET_PK PRIMARY KEY (Serv_Tkt_ID),
  CONSTRAINT SERVICE_TICKET_FK FOREIGN KEY (Car_ID) REFERENCES CAR_t(Car_ID),
  CONSTRAINT SERVICE_TICKET_FK FOREIGN KEY (Cust_ID) REFERENCES CUST_t(Cust_ID),
  CONSTRAINT SERVICE_TICKET_FK FOREIGN KEY (Mech_ID) REFERENCES MECHANIC_t(Mech_ID),
  CONSTRAINT SERVICE_TICKET_FK FOREIGN KEY (Service_ID) REFERENCES SERVICE_t(Service_ID));
  


CREATE TABLE INVOICE_t
 (Inv_ID INT NOT NULL,
  Inv_Num INT NOT NULL,
  Inv_Date DATE NOT NULL,
  Car_ID INT NOT NULL,
  Cust_ID INT NOT NULL,
  Serv_ID INT NOT NULL,
  CONSTRAINT INVOICE_PK PRIMARY KEY (Inv_ID),
  CONSTRAINT INVOICE_FK FOREIGN KEY (Car_ID) REFERENCES CAR_t(Car_ID),
  CONSTRAINT INVOICE_FK FOREIGN KEY (Cust_ID) REFERENCES CUST_t(Cust_ID),
  CONSTRAINT INVOICE_FK FOREIGN KEY (Serv_Tkt_ID) REFERENCES SERVICE_TICKET_t(Serv_ID));
  
  